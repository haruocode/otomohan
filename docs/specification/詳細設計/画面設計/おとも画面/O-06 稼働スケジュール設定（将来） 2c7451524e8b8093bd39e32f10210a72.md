# O-06 稼働スケジュール設定（将来）

この画面は「おともはんが働く時間を自分で設定できる未来機能」

＝ **稼働時間の自己管理 + 自動ステータス切替** を目的とした拡張設計です。

---

# 1. 画面概要

おともはんが、自分の稼働可能時間（通話を受け付ける時間）を設定できる画面。

実装すると以下が可能：

- 稼働時間外は自動的に「離席中（away）」へ切り替わる
- 稼働開始時間になれば自動で「待機中（online）」へ切替
- 強制的に休憩が取りたい時は「例外設定」もできる
- 1週間単位でパターン設定可能

**おともはんが働きやすい環境づくりを補助する重要機能。**

---

# 2. 画面構造（UI）

---

## **ヘッダー**

| 要素 | 内容 |
| --- | --- |
| 左 | ＜ 戻る |
| 中央 | 稼働スケジュール設定 |
| 右 | 保存 |

---

# 3. メインコンテンツ

---

## ① 説明文（短く）

```
通話リクエストを受け付ける時間帯を設定できます。
稼働時間外は自動的に「離席中」になります。
```

---

## ② 週ごとのスケジュール設定（中心機能）

曜日ごとに「開始時間〜終了時間」を設定。

UI例：

```
月   [開始 20:00] ～ [終了 23:00]   [＋追加]
火   [開始 20:00] ～ [終了 23:00]
水   [開始 --:--] ～ [終了 --:--]   稼働しない
木   [開始 18:00] ～ [終了 22:00]
金   [開始 21:00] ～ [終了 25:00]
土   [開始 10:00] ～ [終了 18:00]   [＋追加]
日   [開始 --:--] ～ [終了 --:--]   稼働しない
```

### 要件：

- 1日複数枠に対応（例：昼＋夜）
- 「稼働しない」チェックボックスも追加
- 終了時間が開始時間より早い場合はエラー表示
- UIは各社のシフトアプリと似た操作性にする

---

## ③ スケジュールOFFの日の扱い

- 「稼働しない」チェックでグレーアウト
- 自動ステータスは **ずっと離席** に固定

---

## ④ 例外設定（任意・将来）

短期的に休みたい場合用：

```
【例外設定】
・2025/02/10（月）　休み
・2025/02/13（木）　18:00〜20:00のみ稼働
```

旅行・通院・イベント出演（配信者的な使い方）を想定。

---

## ⑤ 今週の稼働プレビュー（視覚的）

カレンダー or 水平バーで見せる。

例：

```
月：■■■■■■■■
火：■■■■■■■■
水：
木：■■■■■■
金：■■■■■■■■■■
土：■■■■■■■■
日：
```

色：ピンク / 青のグラデーションバー

（稼働時間を視覚的に理解できる）

---

## ⑥ 自動ステータス切り替え説明

```
稼働開始時間 → 自動的に「待機中」
稼働終了時間 → 自動的に「離席中」
```

ユーザー側には表示されない仕組み。

---

# 4. 保存動作

「保存」押下 → 以下を実行：

1. 入力バリデーション
2. API へスケジュール送信
3. 正常なら Toast：「スケジュールを保存しました」
4. O-01（待機画面）へ戻る

---

# 5. 必要 API

| 用途 | API |
| --- | --- |
| スケジュール取得 | GET /otomo/schedule |
| スケジュール保存 | PUT /otomo/schedule |
| 例外設定取得（将来） | GET /otomo/schedule/exceptions |
| 例外設定追加/削除（将来） | PUT /otomo/schedule/exceptions |

データ構造例：

```json
{
  "weekly": [
    {"day": 1, "ranges": [{"start": "20:00", "end": "23:00"}]},
    {"day": 2, "ranges": [{"start": "20:00", "end": "23:00"}]},
    {"day": 3, "ranges": []},
    ...
  ],
  "exceptions": [
    {"date": "2025-02-10", "type": "off"},
    {"date": "2025-02-13", "start": "18:00", "end": "20:00"}
  ]
}
```

---

# 6. エラーハンドリング

- **開始 > 終了** は赤字で警告
- シフトが重複した場合：
    
    「同じ時間帯が重複しています」
    
- API エラー時：
    
    「スケジュールを保存できませんでした」
    

---

# 7. デザイン（全体統一）

- ダークモード
- フォーム部分の枠線は薄いネオングラデーション
- 曜日カードは角丸
- プレビューのバーはピンク/ブルーの帯

O 系（おともはん UI）の世界観をそのまま継承。

---

# 8. 画面レイアウト（概略）

```
[＜]  稼働スケジュール設定     [保存]

通話リクエストを受け付ける時間を設定できます。

(月) 20:00〜23:00
(火) 20:00〜23:00
(水) ー 稼働しない
(木) 18:00〜22:00
(金) 21:00〜25:00
(土) 10:00〜18:00
(日) ー 稼働しない

【例外設定】
  ・2/10（月）休み
  ・2/13（木）18:00〜20:00

今週の稼働プレビュー
[■■■■■        ]

[保存]
```