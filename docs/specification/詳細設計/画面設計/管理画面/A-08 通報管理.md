# A-08 通報管理

通報管理は **運営の安全対策の中心** となるため、「通報内容 → 審査 → 対応 → 記録」というワークフローを正確に運用できる構造にしています。

---

# 1. 画面概要

ユーザーまたはおともはんが行った通報を、運営が **確認・審査・処理** するための管理画面。

目的：

- トラブル・ハラスメント・不正行為を早期に検出する
- 適切な対応（警告・凍結・無効通報処置）を行う
- 証拠（通話ログ）との紐付け
- 審査履歴を残し、外部監査にも耐える状態にする

---

# 2. 通報カテゴリ（例）

アプリ側から送られるカテゴリ：

- 不適切な言動（暴言・侮辱）
- 性的表現
- 無視・放置
- スパム行為
- 課金に関連した不正
- その他カスタム通報

---

# 3. 画面構造（UI）

---

## **ヘッダー**

| 要素 | 内容                       |
| ---- | -------------------------- |
| 左   | 管理メニュー               |
| 中央 | 通報管理                   |
| 右   | フィルター or エクスポート |

---

# 4. メインコンテンツ

---

## ① 通報検索フィルター

検索条件：

- 通報ID
- 通話ID
- ユーザーID
- おともはんID
- カテゴリ（暴言 / 無視 / スパム / 不正 etc.）
- 状態
  - 未対応
  - 審査中
  - 処理済（警告 / 凍結 / 無効）
- 日付範囲（通報日時）

検索 → 一覧更新。

---

## ② 通報一覧（テーブル）

| 項目     | 説明                     |
| -------- | ------------------------ |
| 通報ID   | `report_102`             |
| 通話ID   | `call_220`               |
| 通報者   | user_112                 |
| 対象者   | otomo_03                 |
| カテゴリ | 暴言                     |
| 状態     | 未対応 / 審査中 / 処理済 |
| 通報日時 | 2025/02/01 12:20         |
| 操作     | 詳細                     |

状態カラー：

- 未対応 → 赤
- 審査中 → 黄
- 処理済 → 緑

未対応は必ず上にくるソートがデフォルト。

---

# 5. 通報詳細画面（コア機能）

## ① 基本情報

```
通報ID：report_102
通話ID：call_220
通報者：user_112
対象者：otomo_03
カテゴリ：暴言
通報日時：2025/02/01 12:20
```

---

## ② 通報内容（ユーザー入力）

```
「会話中に人格否定のような発言があり、不快だった」
```

テキストはそのまま保存（編集不可）。

---

## ③ 証拠データ（非常に重要）

### ● 通話ログへのリンク（A-04）

```
[ 通話ログを見る（call_220） ]
```

これにより：

- 実際の通話時間
- RTPログ
- 切断理由
- ステート遷移

が即確認可能。

### ● 録音データ（導入時のみ）

```
[再生] [ダウンロード]
```

録音は権限者のみ視聴可能。

---

## ④ 対象者情報（自動表示）

### おともはんが対象の場合

```
平均評価：4.2
最近の低評価：3件
過去の通報：2件
無応答率：12%
```

### ユーザーが対象の場合

```
過去の通報：1件
課金状況：正常
迷惑行為：なし
```

---

## ⑤ 審査・対応（ワークフロー）

### 対応ステータスの変更

```
[ 未対応 ] → [ 審査中 ] → [ 処理済 ]
```

### 処理内容：

選択肢：

- **警告する（軽度違反）**
- **一時停止（中度違反）**
- **凍結（重度違反）**
- **無効通報としてクローズ**

選択すると理由入力欄を表示：

```
理由（管理ログに記録されます）：
[ テキスト ]
```

---

## ⑥ 審査履歴

```
2025/02/01 12:45  処理済：警告
担当者：admin_01
理由：「暴言と判断」
```

全て A-10（操作ログ）にも記録。

---

## ⑦ クローズ操作（終了）

```
[ 通報をクローズする ]
```

状態が「処理済」の場合のみ押下可能。

---

# 6. エクスポート機能

通知管理者・法務対応用に：

- 通報一覧を CSV に出力
- 対応履歴ログもまとめてエクスポート
- 証拠データのダウンロード（ID紐付け）

---

# 7. API 連動

| 用途           | API                              |
| -------------- | -------------------------------- |
| 通報一覧取得   | GET /admin/reports               |
| 詳細取得       | GET /admin/reports/{id}          |
| 状態変更       | POST /admin/reports/{id}/status  |
| 処理結果の保存 | POST /admin/reports/{id}/resolve |
| 審査履歴       | GET /admin/reports/{id}/history  |

通話ログとの連携：

```
GET /admin/calls/{callId}
```

---

# 8. セキュリティ設計

- 閲覧権限を「CSチーム」「運営チーム」で分離可能
- 証拠データは暗号化保存
- 録音データは特権管理者のみアクセス可
- 操作はすべて監査ログ A-10 に残す

---

# 9. デザイン仕様

- 赤系のアクセントカラーを使用
- 状態タグで視認性を確保
- 詳細画面は縦長・カード型で整理
- テーブルはフィルタリングしやすい構造

---

# 10. 画面レイアウト（概略）

```
[メニュー]          通報管理                   [管理者]

検索：
[通話ID] [ユーザーID] [カテゴリ▼] [状態▼] [検索]

--------------------------------------------------------------
ID          通話ID     通報者     対象者     カテゴリ   状態       操作
report_102  call_220   user_112   otomo_03   暴言       未対応     詳細 >
report_099  call_210   otomo_04   user_08    無視       審査中     詳細 >
report_088  call_115   user_55    otomo_01   スパム     処理済     詳細 >
--------------------------------------------------------------

（詳細）
通報ID：report_102
カテゴリ：暴言
対象者：otomo_03

内容：
「人格否定のような発言」

通話ログ：
[ call_220 を開く ]

対象者情報：
低評価増加 / 過去通報2件

対応：
[警告する] [一時停止] [凍結] [無効通報]
理由：[____________]

履歴：
2025/02/01 admin_01 警告
```
