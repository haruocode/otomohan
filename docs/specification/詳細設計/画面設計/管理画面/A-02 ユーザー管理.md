# A-02 ユーザー管理

この画面は “一般ユーザー（通話する側）” を運営が管理するための画面です。

検索・ソート・ステータス変更・BAN（凍結）・詳細閲覧・ログ確認など運営者の監査や品質管理に必要な全機能を網羅しています。

---

# 1. 画面概要

管理者が **一般ユーザー（呼び出す側）** の情報を確認・編集するための管理画面。

主な目的：

- ユーザー検索・一覧表示
- 個別ユーザーの詳細確認
- 通話履歴・ポイント履歴の確認
- 不正ユーザーの早期検知
- アカウント凍結（BAN）対応

---

# 2. 画面構造（UI）

---

## **ヘッダー**

| 要素 | 内容 |
| --- | --- |
| 左 | 管理メニュー（ハンバーガー） |
| 中央 | ユーザー管理 |
| 右 | 管理者プロフィール（メニュー） |

---

# 3. メインコンテンツ

---

## ① ユーザー検索バー

検索条件：

- **ユーザーID**
- **メールアドレス**
- **名前（部分一致）**
- **登録日（開始〜終了）**
- **状態（アクティブ / 退会 / 凍結）**
- **通報数フィルター（0件 / 1件以上 / 多数）**

検索ボタン → 一覧更新。

---

## ② ユーザー一覧（テーブル表示）

### 表示項目：

| 項目 | 説明 |
| --- | --- |
| ユーザーID | `user_xxx` |
| 名前 | 一般ユーザー名 |
| メールアドレス | ログイン用 |
| 登録日 | YYYY/MM/DD |
| ステータス | アクティブ / 退会 / 凍結 |
| 通報数 | 0〜n件 |
| 残ポイント | 現在の所持ポイント |
| 最終ログイン | YYYY/MM/DD |
| 操作 | 「詳細」ボタン |

並び替え：

- 登録日・最終ログイン・残ポイント

---

## ③ ユーザー詳細画面（モーダル or 別ページ）

**「詳細」押下で以下の情報を表示。**

### 1) 基本情報

- ユーザーID
- 名前
- メールアドレス
- 電話番号（任意）
- 登録日
- 最終ログイン
- デバイス情報（任意）

---

### 2) アカウント状態

表示：

```
状態：アクティブ
[ 凍結する ] [ 退会処理 ]
```

凍結時の理由入力モーダル：

```
凍結理由（管理ログに保存されます）
[_______________________]
[ 実行する ]
```

---

### 3) ポイント情報

```
残ポイント：720pt
累計購入：4,800pt
累計消費：4,100pt
[ 購入履歴を見る ]
[ 使用履歴を見る ]
```

クリックで A-05 に遷移可能。

---

### 4) 通話履歴

```
call_123   12分   さくら（otomo_01）  2025/01/30
call_122    7分   あやか（otomo_03）  2025/01/29
```

→ クリックで通話詳細へ遷移（A-06）。

---

### 5) レビュー履歴（ユーザーが書いたレビュー）

```
★5   「とても話しやすかったです！」  2025/01/20
★3   「普通でした」 2025/01/18
```

将来は **ユーザーの悪質レビュー挙動検知** にも利用可能。

---

### 6) 通報状況

```
通報数：2件
最新：
・2025/01/21  おともはんID: otomo_05
  内容：不適切な言動
```

→ クリックで通報詳細（A-08）へ。

---

## ④ CSV / Excel エクスポート

```
[ この検索結果をエクスポート ]
```

- 管理用
- 監査用
- 月次レポート用

---

## ⑤ エンプティ状態（検索結果なし）

```
該当するユーザーが見つかりませんでした
検索条件を変更してください
```

---

# 4. API 連動

| 用途 | API |
| --- | --- |
| ユーザー一覧取得 | GET /admin/users |
| ユーザー詳細取得 | GET /admin/users/{id} |
| ユーザー凍結 | POST /admin/users/{id}/suspend |
| ユーザー解凍 | POST /admin/users/{id}/unsuspend |
| 退会処理 | DELETE /admin/users/{id} |
| 購入履歴 | GET /admin/users/{id}/purchase-history |
| 使用履歴 | GET /admin/users/{id}/usage-history |
| 通話履歴 | GET /admin/users/{id}/calls |
| レビュー一覧 | GET /admin/users/{id}/reviews |
| 通報一覧 | GET /admin/users/{id}/reports |

---

# 5. セキュリティ要件

- IP 制限（管理画面の特定IPからのみ許可）
- 操作ログ保存（A-10 に記録）
- 凍結 / 退会操作には MFA などの追加認証を推奨
- 全 API は admin ロール必須

---

# 6. デザイン仕様

- 白背景 or ダーク背景、どちらでもOK
- 管理画面は可読性・情報量重視
- テーブルは罫線あり・行ホバーあり
- 状態ステータスはカラータグで表示
    - アクティブ：緑
    - 退会：グレー
    - 凍結：赤

---

# 7. 画面レイアウト（概略）

```
[メニュー]          ユーザー管理            [管理者]

検索：
[ user / mail / name ] [状態▼] [検索]

-----------------------------------------
ID         名前        メール         状態   通報   Pt   最終ログイン   詳細
user_01    太郎        t@x.com        Act    0     720   1/30           [詳細]
user_02    花子        h@x.com        Sus    1     50    1/27           [詳細]
...

-----------------------------------------
（詳細画面）
ユーザーID：user_01
名前：太郎
メール：t@x.com
状態：アクティブ  [凍結する]
残ポイント：720pt

通話履歴：
 call_123 12分 さくら 1/30  >

レビュー：
 ★5 「また話したいです」

通報：
 なし
```