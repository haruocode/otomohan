# C-07 ブロックリスト管理

# 1. 画面概要

ユーザーが過去に **ブロックした相手（おともはん or 一般ユーザー）** を確認し、ブロック解除を行うための管理画面。

- C-04「設定」内の項目として表示
- トラブル対策・安全性のための必須画面
- 履歴画面（U-08 / U-09）とも連動可能

---

# 2. 画面構造（UI）

## **ヘッダー**

| 要素 | 内容 |
| --- | --- |
| 左上 | ＜ 戻る |
| 中央 | ブロックリスト |
| 右上 | なし |

---

# **メインコンテンツ**

## ① 説明文（小さめ）

```
ブロックしたユーザーは、あなたに通話リクエストを送ることができません。
解除すると、再び連絡可能になります。
```

---

## ② ブロック中のユーザー一覧（リスト表示）

1ユーザーあたり：

- 丸いアイコン画像（50〜60px）
- 名前（例：さくら）
- サブテキスト：
    - 「ブロックした日：2025/01/30」
    - または「理由：迷惑行為（任意）」
- 右端に「解除」ボタン（赤系）

### UI例：

```
[アイコン]  さくら
            ブロックした日：2025/01/30
                                     [解除]
-----------------------------------------------
[アイコン]  たろう
            ブロックした日：2024/12/10
                                     [解除]
```

---

## ③ ブロック解除の確認モーダル

解除ボタンタップ時：

```
【ブロックを解除しますか？】
さくら さんのブロックを解除します。
今後、通話リクエストやメッセージを受け取る可能性があります。

[キャンセル]     [解除する]
```

---

## ④ 空状態（ゼロ件）

ブロックリストが空の場合は以下を表示：

```
現在ブロックしているユーザーはいません。
```

シンプルなイラスト（任意）

---

# 3. バックエンド API 仕様連動

## ① 取得

`GET /user/block-list`

レスポンス例：

```json
[
  {
    "userId": "otomo_123",
    "name": "さくら",
    "avatarUrl": "https://...",
    "blockedAt": "2025-01-30T12:00:00Z"
  }
]
```

---

## ② ブロック解除

`DELETE /user/block/{userId}`

成功時：

- リストから該当ユーザーを削除
- Toast「ブロックを解除しました」

---

## ③ ブロック追加（別画面で発生）

主に：

- おともはん詳細（U-02）
- 通話終了画面（U-05）
- 通話中の迷惑行為対策（任意）

で使用：

`POST /user/block/{userId}`

---

# 4. バリデーション & エラーハンドリング

| 状況 | メッセージ |
| --- | --- |
| 通信エラー | 「リストを取得できませんでした」 |
| 解除失敗 | 「ブロック解除に失敗しました」 |
| 権限エラー | 「操作を実行できません」 |

---

# 5. デザイン仕様

- ダークモード（黒背景）
- ユーザーカードは濃グレー (#1A1A1A)
- アイコン縁にピンク/ブルーのアクセント
- 「解除」ボタンは赤だが、アプリ全体に合うようネオン寄り
- 区切り線は薄いブルーライン

U-01〜U-11 と完全に統一した世界観になります。

---

# 6. 画面遷移

```
設定（C-04）
     ↓
C-07 ブロックリスト管理
     ↓ 解除 or 戻る
設定へ戻る
```